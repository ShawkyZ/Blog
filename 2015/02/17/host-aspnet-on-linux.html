
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Host ASP.Net WebApps On Linux</title>
    <meta name="description" content="">
    <meta name="author" content="Abdelrhman Shawky">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap styles -->
    <link href="/assets/themes//bootstrap-3/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="/assets/themes//bootstrap-3/bootstrap/css/bootstrap-flipped.css" rel="stylesheet">
	<link href="/assets/themes//bootstrap-3/bootstrap/css/bootstrap-rtl.min.css" rel="stylesheet">
    <!-- Optional theme -->
    <link href="/assets/themes//bootstrap/css/bootstrap-theme.min.css" rel="stylesheet">
    <!-- Sticky Footer -->
    <link href="/assets/themes//bootstrap/css/bs-sticky-footer.css" rel="stylesheet">
    
      <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    
    <!-- Custom styles -->
    <link href="/assets/themes//css/style.css?body=1" rel="stylesheet" type="text/css" media="all">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

	
	<link rel="shortcut icon" type="image/png" href="/assets/favico.ico">
    <!-- Fav and touch icons -->
    <!-- Update these with your own images
      <link rel="shortcut icon" href="images/favicon.ico">
      <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
      <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
      <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
    -->

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

  </head>

  <body>
    <div id="wrap">
      <nav class="navbar navbar-default" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#jb-navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">مدونة شوقي</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="jb-navbar-collapse">
		 
          <ul class="nav navbar-nav">
            
            
            


  
    
      
      	
      	<li><a href="/ContactUs">تواصل معي</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/archive">الأرشيف</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags">Tags</a></li>
      	
      
    
  
    
      
    
  



          </ul>
         <form class="navbar-form navbar-right" role="search">
            <div class="form-group">
              <input type="text" class="form-control" placeholder="Search">
            </div>
            <button type="submit" class="btn btn-default">بحث</button>
          </form>
        </div><!-- /.navbar-collapse -->
      </nav>

      <div class="container">
        
<div class="page-header">
  <h1>Host ASP.Net WebApps On Linux </h1>
</div>

<div class="row post-full">
  <div class="col-xs-12">
    <div class="date">
      <span>17 Feb 2015</span>
    </div>
    <div class="post-content col-xs-8">
      
<p><img src="/assets/HighlightsvNext.png" alt="" class="img-responsive center-block" /></p>

<p>تكمن المشكلة في إنشاء موقع إلكتروني على الإنترنت في الإستضافة الخاصة بالموقع والتي تأتيك بين أحد الإختيارات التالية:</p>

<p>إستضافة Windows أم إستضافة Linux</p>

<p>وهل العميل على إستعداد للدفع مقابل هذه الإستضافة، وهذا كان هو التحدى لإي مبرمج يعمل بـ لغة ASP البرمجية لإنشاء وبرمجة المواقع</p>

<p>اليوم وبعد أن أصبح لدينا ASP vNext والذي أصبح منتح مفتوح المصدر بالكامل أصبح لدينا خوادم غير الـ IIS والتي كانت لا تعمل إلّا على خوادم Windows فقط</p>

<p>لم نكن نحلم في يوم من الأيام أن نستطيع عمل ASP.NET WebApp ونقوم بإنشاء إستضافة خاصة به على خادم Linux</p>

<p>الآن أصبح الأمر ممكنًا ومتاح للجميع، فمنذ فترة أعلنت شركة Microsoft عن ASP.NET vNext وأطلقت عليه الآن “ASP.Net 5” ويمكنك تطوير موقع كامل على خادم OSX و Linux ويمكنك إستضافة الموقع عليه</p>

<p>كيف يمكننا فعل ذلك؟ وماذا حدث بالظبط، وما هي الخطوات التي يجب أن اتخذها وما هي الـ vNext ؟</p>

<p>مبدأيًا: الـ ASP vNext جميعها مفتوحة المصدر يمكنك التعديل عليها بالكامل كما تحب وقراءة ومشاهدة الكود المصدري، بالإضافة إلى إرسال إقتراحات لـ شركة مايكروسوفت خاصة بتعديلاتك.</p>

<p>سوف تجد الـ repo على GitHub من هنا:</p>

<p>https://github.com/aspnet/home</p>

<p>يذكر أنّ شركة مايكروسوفت في الآونة الأخيرة بدأت تتحد مع فريق Mono فيمكننا في الفترة القادمة توقع ان اي تحديثات خاصة بالـ .NET سوف نجدها في الحال على Mono ولن نضطر للإنتظار بعد الآن بالإضافة إلى إن Mono كـ IDE سوف تتحسن بصورة كبيرة.</p>

<p>ما تم في في ASP vNext كان ببساطة نقلة تاريخية لعدة أسباب:</p>

<p>١- الـ CSharp Compiler موجود مفتوح المصدر تحت اسم Roslyn.</p>

<p>٢- لسنا بحاجة إلى إستخدام الـ IIS Web Server بعد الآن فقد أصبح هناك  Kestrel وبسببه يمكننا إستضافة المواقع على خوادم تعمل بـ Linux وكذلك OSX.</p>

<p>٣- أصبح الآن كل شئ على Nuget.</p>

<p>٤- بعد أن كان لدينا ملفين في المشروع الواحد، ملف خاص بملفات المشروع والثاني خاص بـ Nuget Packages أصبح الاثنين في ملف واحد تحت اسم Project.json</p>

<p>في هذه التدوينة سوف نتكلم عن كيف تبرمج Website بـاستخدام ASP vNext و و ما هي الخطوات اللازمة حتى تستضيف الموقع على Linux Machine ،الامثلة القادمة ستكون مرتبطة بتوزيعات لينكس المبنية على Debian.</p>

<p>مبدأيًا لكي تبرمجASP.Net Website على الويندوز فمن الممكن ان تستعملVisual Studio 2015 و هذا أسهل حل .. أيضًا ، من الممكن ان تستعمل اي محرر أخر.</p>

<p>فلنفترض الآن انك انتهيت من برمجة ال Website بالكامل و تريد استضافته على أحد خوادم Linux فما هي الخطوات اللازمة لذلك؟</p>

<p>اذا كنت تعتقد ان الخطوات القادمة من الصعب تنفيذها فلا تقلق ، فقد جهزنا لك Script سوف يقوم بكل هذه المهام من تلقاء نفسه.</p>

<p>1- تحتاج الى Mono و يكون أعلى من 3.4.1:</p>

<p>اكتب هذه الاوامر في ال Terminal لتحميل و تنصيب Mono 3.8.0</p>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">build</span><span class="o">-</span><span class="n">essential</span>

<span class="n">wget</span> <span class="n">http</span><span class="o">:</span><span class="c1">//download.mono-project.com/sources/mono/mono-3.8.0.tar.bz2
</span>
<span class="n">tar</span> <span class="o">-</span><span class="n">xvf</span> <span class="n">mono</span><span class="o">-</span><span class="mi">3</span><span class="p">.</span><span class="mi">8</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="n">tar</span><span class="p">.</span><span class="n">bz2</span>

<span class="n">cd</span> <span class="n">mono</span><span class="o">-</span><span class="mi">3</span><span class="p">.</span><span class="mi">8</span><span class="p">.</span><span class="mi">0</span><span class="o">/</span>

<span class="p">.</span><span class="o">/</span><span class="n">configure</span> <span class="err">–</span><span class="n">prefix</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span>

<span class="n">make</span>

<span class="n">sudo</span> <span class="n">make</span> <span class="n">install</span></code></pre></figure>

<p>2- نحتاج الى تحميل SSL Certificates خاصة بميكروسوفت:</p>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="n">sudo</span> <span class="n">certmgr</span> <span class="o">-</span><span class="n">ssl</span> <span class="o">-</span><span class="n">m</span> <span class="n">https</span><span class="o">:</span><span class="c1">//go.microsoft.com
</span>
<span class="n">sudo</span> <span class="n">certmgr</span> <span class="o">-</span><span class="n">ssl</span> <span class="o">-</span><span class="n">m</span> <span class="n">https</span><span class="o">:</span><span class="c1">//nugetgallery.blob.core.windows.net
</span>
<span class="n">sudo</span> <span class="n">certmgr</span> <span class="o">-</span><span class="n">ssl</span> <span class="o">-</span><span class="n">m</span> <span class="n">https</span><span class="o">:</span><span class="c1">//nuget.org
</span>
<span class="n">sudo</span> <span class="n">certmgr</span> <span class="o">-</span><span class="n">ssl</span> <span class="o">-</span><span class="n">m</span> <span class="n">https</span><span class="o">:</span><span class="c1">//www.myget.org/F/aspnetvnext/
</span>
<span class="n">mozroots</span> <span class="err">–</span><span class="n">import</span> <span class="err">–</span><span class="n">sync</span></code></pre></figure>

<p>3- نحتاج الى KVM و KRE :</p>

<p>*اكتب ال UserName الخاص بـ السيرفر مكان {USER NAME}</p>

<p>(KRE (K Runtime Enviroment) , KVM (K Version Manager</p>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">curl</span>
<span class="n">curl</span> <span class="o">-</span><span class="n">sSL</span> <span class="n">https</span><span class="o">:</span><span class="c1">//raw.githubusercontent.com/aspnet/Home/master/kvminstall.sh | sh &amp;&amp; source ~/.kre/kvm/kvm.sh
</span><span class="n">sudo</span> <span class="o">-</span><span class="n">s</span>
<span class="n">source</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">{</span><span class="n">USER</span> <span class="n">NAME</span><span class="p">}</span><span class="o">/</span><span class="p">.</span><span class="n">kre</span><span class="o">/</span><span class="n">kvm</span><span class="o">/</span><span class="n">kvm</span><span class="p">.</span><span class="n">sh</span>
<span class="n">kvm</span> <span class="n">upgrade</span></code></pre></figure>

<p>4- الآن كل ما نحتاجه لتشغيل Kestrel Web Server اصبح جاهز ، و لكن Kestrel يعتمد على libuv فيجب تنصيبها له:</p>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">gyp</span>

<span class="n">wget</span> <span class="n">http</span><span class="o">:</span><span class="c1">//dist.libuv.org/dist/v1.0.0-rc2/libuv-v1.0.0-rc2.tar.gz
</span>
<span class="n">tar</span> <span class="o">-</span><span class="n">xvf</span> <span class="n">libuv</span><span class="o">-</span><span class="n">v1</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="o">-</span><span class="n">rc2</span><span class="p">.</span><span class="n">tar</span><span class="p">.</span><span class="n">gz</span>

<span class="n">cd</span> <span class="n">libuv</span><span class="o">-</span><span class="n">v1</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="o">-</span><span class="n">rc2</span><span class="o">/</span>

<span class="p">.</span><span class="o">/</span><span class="n">gyp_uv</span><span class="p">.</span><span class="n">py</span> <span class="o">-</span><span class="n">f</span> <span class="n">make</span> <span class="o">-</span><span class="n">Duv_library</span><span class="o">=</span><span class="n">shared_library</span>

<span class="n">make</span> <span class="o">-</span><span class="n">C</span> <span class="n">out</span>

<span class="n">sudo</span> <span class="n">cp</span> <span class="n">out</span><span class="o">/</span><span class="n">Debug</span><span class="o">/</span><span class="n">lib</span><span class="p">.</span><span class="n">target</span><span class="o">/</span><span class="n">libuv</span><span class="p">.</span><span class="n">so</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libuv</span><span class="p">.</span><span class="n">so</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="o">-</span><span class="n">rc2</span>

<span class="n">sudo</span> <span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="n">libuv</span><span class="p">.</span><span class="n">so</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="o">-</span><span class="n">rc2</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">libuv</span><span class="p">.</span><span class="n">so</span><span class="p">.</span><span class="mi">1</span>

<span class="mi">5</span><span class="o">-</span> <span class="err">تحميل</span> <span class="n">Template</span> <span class="err">جاهز</span> <span class="err">حتى</span> <span class="err">نتأكد</span> <span class="err">ان</span> <span class="err">كل</span> <span class="err">الخطوات</span> <span class="err">السابقة</span> <span class="err">تمت</span> <span class="err">بطريقة</span> <span class="err">صحيحة</span> <span class="o">:</span>

<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">git</span>

<span class="n">git</span> <span class="n">clone</span> <span class="n">http</span><span class="o">:</span><span class="c1">//github.com/aspnet/home
</span>
<span class="n">cd</span> <span class="n">home</span><span class="o">/</span><span class="n">samples</span><span class="o">/</span><span class="n">HelloMvc</span>

<span class="n">kpm</span> <span class="n">restore</span>

<span class="n">kpm</span> <span class="n">build</span></code></pre></figure>

<p>من الممكن عمل build من خلال الأمر kpm build ، او اذا كنت تريد ان تشغل الserver نكتب k kestrel</p>

<p>الان لو كتبت k kestrel و رايت الرسالة Started اذا فمن الممكن تعاين الموقع من خلال الbrowser ادخل على</p>

<p>http://localhost:5004</p>

<p>ملحوظة: يتم كتابة الاوامر مثل k kestrel او kpm build بداخل ال Directory الخاصة بالموقع.</p>

<p>*اذا كنت لا تريد القيام بكل هذه الخطوات من الممكن تحميل ال Script:</p>

<p>https://gist.github.com/ShawkyZ/0b3831329a0372e33aef#file-kestrel-configuration</p>

<p>*اذا كنت تريد ان تستضيف ال Site على Azure VM مثلًا ، فمن الممكن ان تنشئ واحدة و تستخدم (Putty) مثلًا لكي تتصل بها و تبدأ بعمل كل الخطوات السابقة و عند الانتهاء لا تنسى ان تضبط اعدادات ال EndPoint الخاصة بال VM.</p>


    </div>
    

  
    <ul class="tag_box inline col-xs-12">
      <li><i class="glyphicon glyphicon-tags"></i></li>
      
      


  
     
    	<li><a href="#ASP.Net-ref">ASP.Net <span>2</span></a></li>
     
    	<li><a href="#Linux-ref">Linux <span>1</span></a></li>
     
    	<li><a href="#OpenSource-ref">OpenSource <span>1</span></a></li>
    
  



    </ul>
    
 
 
  <div class="share-page">
  

  <div class="pull-right share-links">
    
      <a class = "fa fa-facebook" href="https://facebook.com/sharer.php?u=/2015/02/17/host-aspnet-on-linux" rel="nofollow" target="_blank" title="Share on Facebook"></a>
    

    
      <a class="fa fa-twitter" href="https://twitter.com/intent/tweet?text=Host ASP.Net WebApps On Linux&url=/2015/02/17/host-aspnet-on-linux" rel="nofollow" target="_blank" title="Share on Twitter"></a>
    

    

    
      <a class="fa fa-linkedin" href="http://www.linkedin.com/shareArticle?url=/2015/02/17/host-aspnet-on-linux&title=Host ASP.Net WebApps On Linux" rel="nofollow" target="_blank" title="Share on LinkedIn"></a>
    

    

    

    

    

    


  </div>
</div>

  
 
    
    <ul class="pagination col-xs-12">
    
      <li class="prev"><a href="/2014/02/23/backup-mssql-database-c" title="حفظ و استعادة Backup ف MSSQL Database بال #C">&laquo; Previous</a></li>
    
      <li><a href="/archive.html">Archive</a></li>
    
      <li class="next"><a href="/2016/04/16/ASP-Security" title="ASP.Net Web Application Security">Next &raquo;</a></li>
    
    </ul>
    


  <div id="disqus_thread"></div>
<script type="text/javascript">
    
    var disqus_developer = 1;
    var disqus_shortname = 'shawkyz'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




  </div>
</div>


      </div>

    </div>
<br/>
    <div class="footer">
      <div class="container">
        <p><a href="http://github.com/ShawkyZ">2016 Abdelrhman Shawky &copy;</a>
        </p>
      </div>
    </div>

    <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-68680312-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


    <!-- Latest compiled and minified JavaScript, requires jQuery 1.x (2.x not supported in IE8) -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="/assets/themes//bootstrap-3/bootstrap/js/bootstrap.min.js"></script>
  </body>
</html>

